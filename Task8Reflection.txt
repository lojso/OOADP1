Решение в целом совпадает с эталонным. Единственное отличие - в моей реализации можно в качестве ключа использовать любой тип данных, а не только строки.